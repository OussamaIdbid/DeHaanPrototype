@page "/addproduct"
@using WebApplication.Data
@inject IProductService ProductService
@inject ICategoryService CategoryService

<h2>Create Product</h2>  
<hr />  
<form>  
    <div class="row">  
        <div class="col-md-8">  
            <div class="form-group">  
                <label for="Name" class="control-label">Name</label>  
                <input for="Name" class="form-control" @bind="@product.Name" />  
            </div>  
            <div class="form-group">  
                <label for="Price" class="control-label">Price</label>  
                <input type='number' steps='any' for="Price" class="form-control" @bind="@product.Price" />  
            </div>  
            <div class="form-group">  
                <label for="Category" class="control-label">Category</label>  
                <select for="Category" class="form-control" @bind="@product.CategoryId">  
                    <option value="">Select Category</option>  
                    @foreach (var category in categories)  
                    {  
                        <option value="@category.CategoryId">@category.CategoryName</option>  
  
                    }  
                </select>  
            </div>  
        </div>  
    </div>  
    <div class="row">  
        <div class="col-md-4">  
            <div class="form-group">  
                <input type="button" class="btn btn-primary" @onclick="@CreateProducts" value="Save" />    
            </div>  
        </div>  
    </div>  
</form>  
  
@code {  
  
    Product product = new Product();  
    IEnumerable<Category> categories = new List<Category>();  
  
    protected override async Task OnInitializedAsync()  
    {  
        categories = await CategoryService.GetCategories();  
    }  
  
    protected async Task CreateProducts()  
    {  
        await ProductService.CreateProduct(product);  
        
    }  
}